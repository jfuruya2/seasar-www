<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS"/>
<meta http-equiv="Content-Language" content="ja" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<title>SolarisでSeasar2を動かしてみる</title>
<link rel="stylesheet" type="text/css" href="../theme/main.css" media="screen,projection" />
<link rel="stylesheet" type="text/css" href="../theme/print.css" media="print" />
</head>

<body>

<div id="wrapper">

<div id="header">

<div class="line"><span class="hide">spacer</span></div>

<div id="logo"><h1 id="h01" class="hide">The Seasar Foundation Software License</h1><img src="../images/seasar_logo_blue.gif" alt="The Seasar Foundation" width="390" height="180" /></div>

<div id="tool">

<h2><a href="http://search.seasar.org/">Site Search</a></h2>

<form id="search" name="search" action="http://search.seasar.org/">
<div>
	<input id="search_phrase" type="text" name="phrase" size="20" />
	<input type="hidden" name="perpage" value="30" />
	<input type="hidden" name="enc" value="Shift-JIS" />
	<input id="search_go" type="submit" value="検索" />
</div>
</form>

<h2>Seasar Banner</h2>

<p><a href="../images/seasar_banner.gif"><img src="../images/seasar_banner.gif" alt="Seasar Banner" title="Seasar Banner" width="146" height="33" /></a></p>

</div>

<div id="navi">
<p>English | Japanese</p>
</div>

</div><!-- header -->

<div id="contents_left">

<h2>メニュー</h2>

<ul>
	<li><a href="../wiki/">ニュース &amp; Wiki</a></li>
	<li><a href="https://www.seasar.org/mailman/listinfo/">メーリングリスト</a></li>
	<li><a href="https://www.seasar.org/issues/">トラッキング</a></li>
	<li><a href="https://www.seasar.org/svn/">SVN リポジトリ</a></li>
	<li><a href="http://svn.seasar.org/browse/">SVN リポジトリブラウザ</a></li>
	<li><a href="../feed/">RSSフィード</a></li>
	<li><a href="../license/">ライセンス</a></li>
	<li><a href="https://www.seasar.org/members/">メンバー用ページ</a></li>
</ul>

<ul>
	<li><a href="http://event.seasar.org/">イベント</a></li>
	<li><a href="http://foundation.seasar.org/">ファウンデーション</a></li>
	<li><a href="http://server.seasar.org/">サーバチーム</a></li>
</ul>

<ul>
	<li><a href="../">プロジェクト</a></li>
</ul>

</div><!-- contents_left -->

<div id="contents_center">

<div id="article">

<div class="section">
<h2 id="h02">SolarisでSeasar2を動かしてみる</h2>

	<p>Seasar2の開発・運用環境には、何をお使いでしょうか？「開発にWindowsで運用にはLinux」とか、「どちらもWindows」等、いろいろだと思います。動作環境の選定の条件は様々ですが、Javaの本家本元SunのOS、Solarisも協力な選択肢の一つです。Solarisに馴染みが無い人も多いかも知れませんが、Solarisには、Sparcだけでなくx86版もありますのでLinux同様普通のPCで動作します。</p>

	<p>ただ、OSからとなると多くの方は気軽に試してみるというわけには行かないでしょう。このページでは、出来るだけ簡単に試せるようにVMWareを使ってSolarisでSeasar2を動かしてみます。</p>

<ul>
	<li>コンテンツ
	<ul><li><a href="#download">インストール用DVDイメージのダウンロードと作成</a></li>
		<li><a href="#install">VMWareのゲストOS環境へのインストール</a></li>
		<li><a href="#seasar2">Seasar2を動かしてみる</a></li>
		<li><a href="#end">おわりに</a></li>
	</ul>
	</li>
</ul>

<h2 id="download">インストール用DVDイメージのダウンロードと作成</h2>

<!-- Sun Affiliate start -->
<div class="affiliate">
<script type="text/javascript" src="../affiliate/dev_solaris.js"></script>
<script type="text/javascript">
write_sun_affiliate('../');
</script>
<noscript><a href="http://sdc.sun.co.jp/solaris/?utm_source=banner&amp;utm_medium=banner&amp;utm_term=Solaris&amp;utm_content=SeaSar&amp;utm_campaign=Solaris%2BSDC%2BCampaign" rel="nofollow"><img src="http://www.seasar.org/wiki/index.php?plugin=ref&amp;page=SeasarWiki&amp;src=300x300sunDeveloper.gif" alt="Solaris 10を今すぐもっと！" title="Solaris 10を今すぐもっと！" width="300" height="300" /></a>
</noscript>
</div>
<!-- Sun Affiliate end -->

<p>まず、Sunのサイトからイメージをダウンロード(SDCへの登録が必要)します。SDCへの登録と英語のサイトでの入力項目が少しありますので、慣れてないとダウンロードまでたどり着けないかもしれません。でも<a href="http://jp.sun.com/download/howto/">日本語の説明</a>がありますので、その通り進んでいけば、大丈夫です。ただ、バナーのリンクから飛ぶとSTEP1とSTEP2のページはちょっと違うので注意してください。STEP3からはそのままでOKです。</p>

<p>また、<a href="http://jp.sun.com/download/faq.html">FAQ</a>もありますので、適宜参照してください。</p>

<p>今回ダウンロードしたのは、以下のファイルです。</p>

<ul><li>sol-10-u2-ga-x86-dvd.exe</li>
	<li>sol-10-u2-ga-x86-dvd_001.nos</li>
	<li>sol-10-u2-ga-x86-dvd_002.nos</li>
	<li>sol-10-u2-ga-x86-dvd_003.nos</li>
</ul>

<p><a href="http://www.sun.com/software/solaris/download_instruction.xml">前はコマンドラインで結合しないとDVDのイメージは作れなかった</a>のに、Windowsユーザの利便性を考慮してか、exeファイルになっています。ただ圧縮率が高いのかやたら時間がかかります。「90 minutes on a P4-3GHz system」と書いてあります... ネットワークが速い環境なら、いままで通りZIPファイルを落として解凍したあと結合する方がはやいです。</p>

<p>できたファイルはMD5でチェックすることをお薦めします。</p>

<h2 id="install">VMWareのゲストOS環境へのインストール</h2>

<p>インストール手順の参考に、docs.sun.comから「Solaris 10 6/06 インストールガイド (基本編)」を<a href="http://docs.sun.com/app/docs/prod/solaris.10">ダウンロード</a>しておきます。インストールマニュアル以外にも日本語マニュアルが充実してます。</p>

<p>前述したように、今回はVMWareのゲストOSとしてインストールすることにしました。ちょっと試したいという場合には手軽でいいです。ISOイメージをそのままマウントできて、メディアに焼く必要がないですし。でも、それじゃ遅いし、デュアルブートしたいという方は<a href="http://jp.sun.com/communities/users/0606/feature01.html">ここ</a>を参照してください。また、自分のマシンで動くか心配な人は、<a href="http://www.sun.com/bigadmin/hcl/data/sol/">HCL for Solaris OS</a>を参照してください。動いたよという報告がいっぱいのってます。</p>

<p>では、とりあえずインストールDVDのイメージをマウントしてブートします。GRUBが立ち上がり、以下の図1のブートメニューが表示されました。</p>

<div class="figure">
<img src="images/sol10-01.png" alt="ブートメニュー" title="ブートメニュー" />
<p>図1. ブートメニュー</p>
</div>

<pre class="hide">
--------------------------------------------------------------------------------
Solaris
Solaris Serial Console ttya
Solaris Serial Console ttyb (for lx50, v60x and v65x)
--------------------------------------------------------------------------------
</pre>

<p>今回はコンソールを使うわけじゃないので、「<strong>Solaris</strong>」を選択。で、インストールの種類を以下から選択。</p>

<pre>
1 Solaris Interactive
2 Custom JumpStart
3 Solaris Interactive Text (Desktop session)
4 Solaris Interactive Text (Console session)
5 Apply driver updates
6 Single user shell
</pre>

<p>対話式の「<strong>1</strong>」を選択。しばらくするとGUIの画面になって言語の選択(図2)。</p>

<div class="figure">
<img src="images/sol10-02.png" alt="言語の選択" title="言語の選択" />
<p>図2. 言語の選択</p>
</div>

<p>「<strong>4</strong>」のJapaneseを選択。あとは、質問に答えてネットワークとか時間とかを設定します。インストール形式はデフォルトを選択しました(図3)。文字コードを変えた場合やインストールするパッケージを選択する場合はここでカスタムインストールを選択してください。インストールするパーティションをいじりたい場合もここでカスタムインストールです。</p>

<div class="figure">
<img src="images/sol10-03.png" alt="インストール形式の選択" title="インストール形式の選択" />
<p>図3. インストール形式の選択</p>
</div>

<h3 id="h03-1">インストール開始</h3>

<p>インストールする項目のサマリーが表示されるので、内容を確認して「<strong>インストール開始</strong>」を押します(図4)。</p>

<div class="figure">
<img src="images/sol10-04.png" alt="インストール項目の確認" title="インストール項目の確認" />
<p>図4. インストール項目の確認</p>
</div>

<p>しばらくしてインストールが終わると再起動。やっとSolarisが起動しました。初回起動時は、NFSに関する質問がありますが、まぁ使わないし試すだけなのでデフォルトのままでOK(図5)です。</p>

<div class="figure">
<img src="images/sol10-05.png" alt="NFSに関する質問" title="NFSに関する質問" />
<p>図5. NFSに関する質問</p>
</div>

<p>以上の手順は、Web上にスクリーンショット付でたくさん公開されています(*)。VMWareならマシン一台でもこういったサイトを調べながら作業できるので、その点でもお薦めです。</p>

<ul>
<li>* <a href="http://www15.big.or.jp/~yamamori/sun/sol10/">Solaris 10(x86)をインストールしてみよう</a> など</li>
</ul>

<p>ということでとりあえずインストールは完了です(図6)。</p>

<div class="figure">
<img src="images/sol10-06.png" alt="インストール後のようこそ！画面" title="インストール後のようこそ！画面" />
<p>図6. インストール後のようこそ！画面</p>
</div>

<h2 id="seasar2">Seasar2を動かしてみる</h2>

<p>後はSeasar2を動かしてみます。これは、WindowsやLinuxと大差ないので、簡単に。</p>

<p>まず、Javaはさすがに既にインストール済み(1.5.0_06)なので、ちょっと古いですがそのまま使います。Seasar2(今回は2.3.12)をダウンロードしてサンプルを実行してみます。</p>

<pre>
> unzip S2.3.12.zip
Archive:  S2.3.12.zip

〜〜〜〜〜〜〜〜〜〜
　　　中略
〜〜〜〜〜〜〜〜〜〜

> cd seasar2
</pre>

<p>面倒なのでサンプルを実行するだけのスクリプトを書きました。</p>

<pre>
> cat execute_example.csh
#!/usr/bin/csh

setenv CLASSPATH lib/aopalliance-1.0.jar
setenv CLASSPATH ${CLASSPATH}:lib/commons-logging-1.0.4.jar
setenv CLASSPATH ${CLASSPATH}:lib/geronimo-j2ee_1.4_spec-1.0.jar
setenv CLASSPATH ${CLASSPATH}:lib/geronimo-jta_1.0.1B_spec-1.0.jar
setenv CLASSPATH ${CLASSPATH}:lib/javassist-3.0.jar
setenv CLASSPATH ${CLASSPATH}:lib/junit-3.8.1.jar
setenv CLASSPATH ${CLASSPATH}:lib/log4j-1.2.8.jar
setenv CLASSPATH ${CLASSPATH}:lib/ognl-2.6.5.jar
setenv CLASSPATH ${CLASSPATH}:lib/poi-2.5.1-final-20040804.jar
setenv CLASSPATH ${CLASSPATH}:lib/s2-extension-2.3.12.jar
setenv CLASSPATH ${CLASSPATH}:lib/s2-framework-2.3.12.jar
setenv CLASSPATH ${CLASSPATH}:build/classes

echo "=================================================="
echo "サンプル GreetingMain を実行。"
echo "--------------------------------------------------"
java examples.di.main.GreetingMain
echo "--------------------------------------------------"

echo "サンプル GreetingMain2 を実行。"
echo "--------------------------------------------------"
java examples.di.main.GreetingMain2
echo "--------------------------------------------------"

echo "サンプル GreetingMain3 を実行。"
echo "--------------------------------------------------"
java examples.di.main.GreetingMain3
echo "--------------------------------------------------"

echo "サンプル GreetingMain4 を実行。"
echo "--------------------------------------------------"
java examples.di.main.GreetingMain4
echo "=================================================="
</pre>

<p>で、実行です。</p>

<pre>
> ./execute_example.csh
==================================================
サンプル GreetingMain を実行。
--------------------------------------------------
Hello World!
--------------------------------------------------
サンプル GreetingMain2 を実行。
--------------------------------------------------
Hello World!
--------------------------------------------------
サンプル GreetingMain3 を実行。
--------------------------------------------------
DEBUG 2006-10-12 21:28:22,291 [main] BEGIN examples.di.impl.GreetingClientImpl#execute()
DEBUG 2006-10-12 21:28:22,307 [main] BEGIN examples.di.impl.GreetingImpl#greet()
DEBUG 2006-10-12 21:28:22,323 [main] END examples.di.impl.GreetingImpl#greet() : Hello World!
Hello World!
DEBUG 2006-10-12 21:28:22,338 [main] END examples.di.impl.GreetingClientImpl#execute() : null
--------------------------------------------------
サンプル GreetingMain4 を実行。
--------------------------------------------------
DEBUG 2006-10-12 21:28:25,304 [main] BEGIN examples.di.impl.GreetingClientImpl#execute()
DEBUG 2006-10-12 21:28:25,320 [main] BEGIN examples.di.impl.GreetingImpl#greet()
DEBUG 2006-10-12 21:28:25,332 [main] END examples.di.impl.GreetingImpl#greet() : Hello World!
Hello World!
DEBUG 2006-10-12 21:28:25,349 [main] END examples.di.impl.GreetingClientImpl#execute() : null
==================================================
</pre>

<p>普通にいけました。</p>

<h3 id="h03-2">[おまけ]Seasar2を動かしてみる (CDE版)</h3>

<p>SolarisらしくCDEでのSeasar2実行画面も(図7)。</p>

<div class="figure">
<img src="images/sol10-07.png" alt="CDEでのSeasar2実行画面" title="CDEでのSeasar2実行画面" />
<p>図7. CDEでのSeasar2実行画面</p>
</div>

<h2 id="end">おわりに</h2>

<p>今回はSolarisをインストールして、Seasar2を動かしてみました。WindowsやLinux同様に何の問題も無く動作しました。Solarisは、Linuxに比べて敷居が高く感じるかも知れませんが、インストーラは使いやすいですし、日本語のドキュメントも充実しているので、気軽に試すことができると思います。動作環境選定の選択肢としてぜひ試してみてください。</p>

</div>

</div>

</div><!-- article -->

</div><!-- contents_center -->

<div id="footer">
<address>&copy; Copyright The Seasar Foundation and the others 2004-2006, all rights reserved.</address>
<div class="line"><span class="hide">spacer</span></div>
</div><!-- footer -->

</div><!-- wrapper -->

</body>
</html>
